// save as list-deps.js and run: node list-deps.js
const fs = require('fs');

const lock = JSON.parse(fs.readFileSync('package-lock.json', 'utf8'));
console.log('List of dependencies and their versions:');
const result = new Map();

function walk(deps) {
  if (!deps) return;
  for (const [name, info] of Object.entries(deps)) {
    result.set(name, info.version);
    walk(info.dependencies);
  }
}

walk(lock.dependencies);

for (const [name, version] of result.entries()) {
  console.log(`${name}@${version}`);
}
